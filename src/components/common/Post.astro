---
import { Image } from "astro:assets";
import type { SimplifiedPost } from "@src/lib/types";
import Author from "./Author.astro";
import FormattedDate from "./FormattedDate.astro";

interface Props {
  post: SimplifiedPost;
}
const { post } = Astro.props;
---

<div
  class="w-full bg-gray-50 border border-gray-100 rounded-xl overflow-hidden flex flex-col gap-3 p-4"
>
  {
    post.featuredImage && (
      <a href={`/${post.slug}/`} class="-mx-4 -mt-4 h-52 overflow-hidden flex items-center">
        <Image
          src={post.featuredImage.sourceUrl}
          width={720}
          height={360}
          class="object-cover transition-transform h-full hover:scale-110 hover:rotate-2 duration-500"
          alt={post.featuredImage.title}
        />
      </a>
    )
  }
  <div class="flex gap-2 items-center">
    {
      post.categories.slice(0, 2).map((category) => (
        <a
          class="
            leading-none whitespace-nowrap
            bg-white border border-gray-200/50
            px-2 py-1 rounded-md 
            font-medium text-gray-700 text-xs
            transition duration-500
            hover:bg-sky-500 hover:text-white hover:border-sky-500
          "
          href={`/category/${category.slug}`}
        >
          {category.name}
        </a>
      ))
    }
  </div>
  <h1 class="text-xl font-semibold capitalize text-pretty">
    <a
      href={`/${post.slug}/`}
      set:html={post.title}
      class="transition duration-500 hover:text-sky-600"
    />
  </h1>
  <div class="flex gap-4 items-center justify-between">
    <Author details={post.author} picSize="sm" />
    <div class="text-gray-600 text-sm">
      <FormattedDate date={post.date} format="short" />
    </div>
  </div>
</div>
